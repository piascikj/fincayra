<html xmlns="http://www.w3.org/2000/xhtml">
<head>
<link rel="stylesheet" href="/css/smoothness/jquery-ui-1.8.13.custom.css" type="text/css"/>
<style>
	li {
		color:blue; 
		margin:5px; 
		cursor:pointer;
		list-style: none;
	}
</style>
<script type="text/javascript" src="/js/jquery-ui-1.8.13.min.js"></script>
<script type="text/javascript" src="/js/jquery.layout-latest.js"></script>
<script>
    $(document).ready(function () {
        $('#notebooks-app').layout({
			defaults : {
				applyDefaultStyles: true
			},
			
			west : {
				slidable: true
			}
		});
		
		$('#new_notebook').click(function(event) {
			$('#notebook_name_box').show();
			$('#notebook_name').hide();
			$('#notebook_name_form').show();
			return false;
		});
		
		//Get the notebook data
		$.getJSON(fincayra.getNoteBooks,function(data) {
			var items = [];

			$.each(data.results, function(key, val) {
			    items.push('<h5><a href="#" id="{}">{}</a></h5><div>First content</div>'.tokenize(val.uuid,val.name));
			});

			$('#notebook_list').append(items.join(''));

			$('#notebook_list').accordion();

			$('.notebook-link').click(function() {
				$('#notebook_name_form').hide();
				$('#notebook_name_box').show();
				//get the clicked notebook
				var uuid = $(this).attr("id");
				$.getJSON(fincayra.getNoteBookByUuid.tokenize(uuid),function(data) {
					fincayra.noteBook = data.results[0];
					$('#notebook_name').html(fincayra.noteBook.name).show();
				});
				
				//alert($(this).attr("id"));
				return false;
			});
			
			$('#notebook_name').click(function() {
				$('#notebook_name_box').show();
				$('#notebook_name').hide();
				$('#notebook_name_edit').val(fincayra.noteBook.name);
				$('#notebook_name_form').show();
				return false;
			});
		});		
		

    });
</script>
</head>
<body>
	</script>
	<div id="notebooks-app" style="height:100%">
		<div class="ui-layout-center">
			<div id="notebook_name_box" class="stylized thin" style="display:none;">
				<form id="notebook_name_form" style="display:none;">
					<input type="text" name="name" id="notebook_name_edit" autocomplete="off"/>
					<button>OK</button><button>Cancel</button>
				</form>
				<p id="notebook_name" style="display:none;"></p>
			</div>
		</div>
		<div class="ui-layout-west">
			<a href="#" id="new_notebook">Create a new NoteBook...</a>
			<div id="notebook_list">
			</div>
		</div>
	</div>
</body>
</html>
